<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>bes: http::RemoteResource Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">bes
   &#160;<span id="projectnumber">Updated for version 3.20.8-314</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="../../annotated.html"><span>Classes</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="../../classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="../../inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="../../functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('dd/d98/classhttp_1_1RemoteResource.html','../../');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="../../df/d68/classhttp_1_1RemoteResource-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">http::RemoteResource Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="../../d1/d79/RemoteResource_8h_source.html">RemoteResource.h</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for http::RemoteResource:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d0f/classhttp_1_1RemoteResource__coll__graph.png" border="0" usemap="#http_1_1RemoteResource_coll__map" alt="Collaboration graph"/></div>
<map name="http_1_1RemoteResource_coll__map" id="http_1_1RemoteResource_coll__map">
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a5a0b882b53e6c278abdf78ec1de5f04f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../db/df5/document_8h.html#ac6ea5b168e3fe8c7fa532450fc9391f7">rapidjson::Document</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d98/classhttp_1_1RemoteResource.html#a5a0b882b53e6c278abdf78ec1de5f04f">get_as_json</a> ()</td></tr>
<tr class="memdesc:a5a0b882b53e6c278abdf78ec1de5f04f"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="../../dd/d98/classhttp_1_1RemoteResource.html#a5a0b882b53e6c278abdf78ec1de5f04f" title="get_as_json() This function returns the cached resource parsed into a JSON document. ">get_as_json()</a> This function returns the cached resource parsed into a JSON document.  <a href="#a5a0b882b53e6c278abdf78ec1de5f04f">More...</a><br /></td></tr>
<tr class="separator:a5a0b882b53e6c278abdf78ec1de5f04f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ffbb23b98f241ef0ede82c740d9f50b"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d98/classhttp_1_1RemoteResource.html#a3ffbb23b98f241ef0ede82c740d9f50b">get_http_response_header</a> (const std::string header_name)</td></tr>
<tr class="separator:a3ffbb23b98f241ef0ede82c740d9f50b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0055cd645f3e5410bb86e7e97c6ee8d7"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d98/classhttp_1_1RemoteResource.html#a0055cd645f3e5410bb86e7e97c6ee8d7">get_response_as_string</a> ()</td></tr>
<tr class="separator:a0055cd645f3e5410bb86e7e97c6ee8d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1262e35b588f91f9124579551f87551b"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d98/classhttp_1_1RemoteResource.html#a1262e35b588f91f9124579551f87551b">getCacheFileName</a> ()</td></tr>
<tr class="separator:a1262e35b588f91f9124579551f87551b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4eabea32e536fcfd139911e2a02ad7da"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::string &gt; *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d98/classhttp_1_1RemoteResource.html#a4eabea32e536fcfd139911e2a02ad7da">getResponseHeaders</a> ()</td></tr>
<tr class="separator:a4eabea32e536fcfd139911e2a02ad7da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9fa0251ba6e9068ece4fdcb9c4d68ce6"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d98/classhttp_1_1RemoteResource.html#a9fa0251ba6e9068ece4fdcb9c4d68ce6">getType</a> ()</td></tr>
<tr class="separator:a9fa0251ba6e9068ece4fdcb9c4d68ce6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f4d921095c0f146ae5d58b7ce96f1dd"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3f4d921095c0f146ae5d58b7ce96f1dd"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>RemoteResource</b> (const std::string &amp;<a class="el" href="../../d0/df7/classhttp_1_1url.html">url</a>, const std::string &amp;uid=&quot;&quot;, long long expires_interval=REMOTE_RESOURCE_DEFAULT_EXPIRED_INTERVAL)</td></tr>
<tr class="separator:a3f4d921095c0f146ae5d58b7ce96f1dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c48635d87266eec70822c67655f4a98"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d98/classhttp_1_1RemoteResource.html#a2c48635d87266eec70822c67655f4a98">retrieveResource</a> ()</td></tr>
<tr class="separator:a2c48635d87266eec70822c67655f4a98"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8c91922bc355978fd54c49bc113e58d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d98/classhttp_1_1RemoteResource.html#ae8c91922bc355978fd54c49bc113e58d">retrieveResource</a> (const std::map&lt; std::string, std::string &gt; &amp;content_filters)</td></tr>
<tr class="separator:ae8c91922bc355978fd54c49bc113e58d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ad66dcd7430b4b67ad6a4f0afc68c9e"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d98/classhttp_1_1RemoteResource.html#a9ad66dcd7430b4b67ad6a4f0afc68c9e">~RemoteResource</a> ()</td></tr>
<tr class="separator:a9ad66dcd7430b4b67ad6a4f0afc68c9e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:afef772dfc3a1df5a3d9534b3d30a9855"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="afef772dfc3a1df5a3d9534b3d30a9855"></a>
class&#160;</td><td class="memItemRight" valign="bottom"><b>RemoteResourceTest</b></td></tr>
<tr class="separator:afef772dfc3a1df5a3d9534b3d30a9855"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This class encapsulates a remote resource available via HTTP GET. It will retrieve the content of the resource and place it in a local disk cache for rapid (subsequent) access. It can be configure to use a proxy server for the outgoing requests. </p>

<p>Definition at line <a class="el" href="../../d1/d79/RemoteResource_8h_source.html#l00054">54</a> of file <a class="el" href="../../d1/d79/RemoteResource_8h_source.html">RemoteResource.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a9ad66dcd7430b4b67ad6a4f0afc68c9e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">http::RemoteResource::~RemoteResource </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Releases any memory resources and also any existing cache file locks for the cached resource. ( Closes the file descriptor opened when <a class="el" href="../../dd/d98/classhttp_1_1RemoteResource.html#a2c48635d87266eec70822c67655f4a98">retrieveResource()</a> was called.) </p>

<p>Definition at line <a class="el" href="../../dc/da3/RemoteResource_8cc_source.html#l00201">201</a> of file <a class="el" href="../../dc/da3/RemoteResource_8cc_source.html">RemoteResource.cc</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a5a0b882b53e6c278abdf78ec1de5f04f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../db/df5/document_8h.html#ac6ea5b168e3fe8c7fa532450fc9391f7">rapidjson::Document</a> http::RemoteResource::get_as_json </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><a class="el" href="../../dd/d98/classhttp_1_1RemoteResource.html#a5a0b882b53e6c278abdf78ec1de5f04f" title="get_as_json() This function returns the cached resource parsed into a JSON document. ">get_as_json()</a> This function returns the cached resource parsed into a JSON document. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">target_url</td><td>The URL to dereference.  Move this to ../curl_utils.cc (Requires moving the rapidjson lib too) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>JSON document parsed from the response document returned by target_url </dd></dl>

<p>Definition at line <a class="el" href="../../dc/da3/RemoteResource_8cc_source.html#l00709">709</a> of file <a class="el" href="../../dc/da3/RemoteResource_8cc_source.html">RemoteResource.cc</a>.</p>

</div>
</div>
<a class="anchor" id="a3ffbb23b98f241ef0ede82c740d9f50b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string http::RemoteResource::get_http_response_header </td>
          <td>(</td>
          <td class="paramtype">const std::string&#160;</td>
          <td class="paramname"><em>header_name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the value of the requested HTTP response header. Evaluation is case-insensitive. If the requested header_name is not found the empty string is returned. </p>

<p>Definition at line <a class="el" href="../../dc/da3/RemoteResource_8cc_source.html#l00602">602</a> of file <a class="el" href="../../dc/da3/RemoteResource_8cc_source.html">RemoteResource.cc</a>.</p>

</div>
</div>
<a class="anchor" id="a0055cd645f3e5410bb86e7e97c6ee8d7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string http::RemoteResource::get_response_as_string </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns cache file content in a string.. </p>

<p>Definition at line <a class="el" href="../../dc/da3/RemoteResource_8cc_source.html#l00672">672</a> of file <a class="el" href="../../dc/da3/RemoteResource_8cc_source.html">RemoteResource.cc</a>.</p>

</div>
</div>
<a class="anchor" id="a1262e35b588f91f9124579551f87551b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string http::RemoteResource::getCacheFileName </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the (read-locked) cache file name on the local system in which the content of the remote resource is stored. Deleting of the instance of this class will release the read-lock. </p>

<p>Definition at line <a class="el" href="../../dc/da3/RemoteResource_8cc_source.html#l00234">234</a> of file <a class="el" href="../../dc/da3/RemoteResource_8cc_source.html">RemoteResource.cc</a>.</p>

</div>
</div>
<a class="anchor" id="a4eabea32e536fcfd139911e2a02ad7da"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">vector&lt; string &gt; * http::RemoteResource::getResponseHeaders </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns a std::vector of HTTP headers received along with the response from the request for the remote resource.. </p>

<p>Definition at line <a class="el" href="../../dc/da3/RemoteResource_8cc_source.html#l00719">719</a> of file <a class="el" href="../../dc/da3/RemoteResource_8cc_source.html">RemoteResource.cc</a>.</p>

</div>
</div>
<a class="anchor" id="a9fa0251ba6e9068ece4fdcb9c4d68ce6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string http::RemoteResource::getType </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns the DAP type std::string of the RemoteHttpResource </p><dl class="section return"><dt>Returns</dt><dd>Returns the DAP type std::string used by the BES Containers. </dd></dl>

<p>Definition at line <a class="el" href="../../d1/d79/RemoteResource_8h_source.html#l00164">164</a> of file <a class="el" href="../../d1/d79/RemoteResource_8h_source.html">RemoteResource.h</a>.</p>

</div>
</div>
<a class="anchor" id="a2c48635d87266eec70822c67655f4a98"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void http::RemoteResource::retrieveResource </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This method will check the cache for the resource. If it's not there then it will lock the cache and retrieve the remote resource content using HTTP GET.</p>
<p>When this method returns the <a class="el" href="../../dd/d98/classhttp_1_1RemoteResource.html">RemoteResource</a> object is fully initialized and the cache file name for the resource is available along with an open file descriptor for the (now read-locked) cache file. </p>

<p>Definition at line <a class="el" href="../../dc/da3/RemoteResource_8cc_source.html#l00249">249</a> of file <a class="el" href="../../dc/da3/RemoteResource_8cc_source.html">RemoteResource.cc</a>.</p>

</div>
</div>
<a class="anchor" id="ae8c91922bc355978fd54c49bc113e58d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void http::RemoteResource::retrieveResource </td>
          <td>(</td>
          <td class="paramtype">const std::map&lt; std::string, std::string &gt; &amp;&#160;</td>
          <td class="paramname"><em>content_filters</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This method will check the cache for the resource. If it's not there then it will lock the cache and retrieve the remote resource content using HTTP GET.</p>
<p>When this method returns the RemoteHttpResource object is fully initialized and the cache file name for the resource is available along with an open file descriptor for the (now read-locked) cache file.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">uid</td><td></td></tr>
    <tr><td class="paramname">template_key</td><td></td></tr>
    <tr><td class="paramname">replace_value</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../dc/da3/RemoteResource_8cc_source.html#l00265">265</a> of file <a class="el" href="../../dc/da3/RemoteResource_8cc_source.html">RemoteResource.cc</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="../../d1/d79/RemoteResource_8h_source.html">RemoteResource.h</a></li>
<li><a class="el" href="../../dc/da3/RemoteResource_8cc_source.html">RemoteResource.cc</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../d3/d69/namespacehttp.html">http</a></li><li class="navelem"><a class="el" href="../../dd/d98/classhttp_1_1RemoteResource.html">RemoteResource</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
